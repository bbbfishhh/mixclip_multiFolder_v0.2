# 自动化视频混剪工具 v2.0 (带 Web UI)

这是一个功能强大的 Python 视频处理工具，它通过一个简洁的 Web 界面，让用户能够灵活地将多个素材文件夹中的视频片段，拼接成带有固定片头 (Hook) 和片尾 (Code) 的全新视频。

与旧版本相比，v2.0 引入了图形用户界面 (GUI)，并支持更复杂的混剪逻辑，专为运营人员和内容创作者设计，无需编写任何代码。

## ✨ 功能简介

-   **🖥️ Web 用户界面**: 基于 Gradio 构建，操作直观，所有参数均可在网页上配置。
-   **🧩 模块化结构**: 最终视频可由三部分组成：`Hook (片头)` + `Middle (中间素材)` + `Code (片尾)`。
-   **📚 多源混剪**: 支持从最多5个不同的 `Middle` 文件夹中提取素材，且每个文件夹都可以独立设置片段时长和数量。
-   **🔄 智能指针算法**: 确保在批量生成视频时，`Middle` 素材片段的重复率降至最低，最大化内容多样性。
-   **📄 详细日志**: 每次生成任务都会创建一个详细的日志文件，记录每个最终视频的具体构成，便于追溯和分析。
-   **📐 标准化输出**: 所有输出视频都统一为 1080x1920 分辨率和 30fps 帧率，适配主流短视频平台。

## ⚙️ 环境要求

1.  **Python 3**: [下载地址](https://www.python.org/)
2.  **FFmpeg**: [下载地址](https://ffmpeg.org/download.html)
    -   请确保安装后，将 `ffmpeg` 和 `ffprobe` 添加到系统的环境变量 (PATH) 中，以便脚本可以正常调用。
3.  **Python 依赖库**: 在项目根目录下已包含 `requirements.txt` 文件。

## 🚀 如何使用 (Web UI 推荐)

这是为普通用户设计的标准使用流程。

### 1. 克隆或下载项目

将本项目文件下载到你的电脑上。

### 2. 安装依赖

-   打开你的终端 (Terminal) 或命令提示符 (Command Prompt)。
-   使用 `cd` 命令进入到你下载的项目文件夹中。
-   运行以下命令来安装所有必需的 Python 库：
    ```bash
    pip install -r requirements.txt
    ```

### 3. 启动 Web 界面

-   在终端中运行 `app.py` 文件：
    ```bash
    python app.py
    ```
-   终端会显示一个本地网址，通常是 `http://127.0.0.1:7860`。
-   在你的浏览器中打开这个网址，即可看到操作界面。

### 4. 在网页上配置参数

-   **全局设置**: 设置你希望最终生成的视频总数。
-   **Hook (片头) & Code (片尾)**:
    -   勾选以启用。启用后，点击对应的框选择一个**视频文件**作为固定的片头或片尾。
-   **Middle (中间素材)**:
    -   这是混剪的核心。你需要提供一个或多个包含视频素材的**文件夹路径**。
    -   **素材文件夹路径**: 将文件夹的**绝对路径**粘贴到输入框中。
    -   **截取秒数**: 从该文件夹的每个视频中截取片段的时长。
    -   **片段数**: 每个最终视频里，要包含多少个来自这个文件夹的片段。
    -   点击 "➕" 或 "➖" 按钮来增加或删除 Middle 文件夹配置。

### 5. 开始生成

-   所有参数配置完毕后，点击页面底部的 "🚀 生成视频" 按钮。
-   处理过程可能需要一些时间，请耐心等待。界面会提示任务已开始，并在完成后显示结果。

### 6. 查看结果

-   所有生成的视频和日志文件都保存在项目根目录下的 `output/` 文件夹中。
-   每次任务的结果会保存在一个以日期和生成总数命名的子文件夹里，例如 `output/2025-09-01-total10/`。
