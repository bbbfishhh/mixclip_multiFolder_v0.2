@echo off
:: 设置窗口标题，方便运营同事识别
title MixClip 视频混剪工具 - 后台控制台

:: 使用chcp 65001防止窗口中的中文显示为乱码
chcp 65001 > nul

:: 清理屏幕，让界面更整洁
cls

echo.
echo ==================================================
echo     欢迎使用 MixClip 视频混剪工具 v2.0
echo ==================================================
echo.
echo   此窗口是程序的核心后台，请在网页操作期间保持开启。
echo.
echo.

echo [第1步] 正在检查并安装必要的组件...
echo (如果已经安装过，此步骤会很快跳过，请稍候)
echo.

:: 使用 py -3 -m pip 代替 "pip"，可以更稳定地调用与Python版本匹配的pip
:: 这能有效避免电脑上安装了多个Python版本时可能出现的冲突
py -3 -m pip install -r requirements.txt

echo.
echo ==================================================
echo   组件准备完毕！
echo ==================================================
echo.

echo [第2步] 正在启动程序...
echo.
echo   请稍等，程序会自动在您的默认浏览器中打开操作页面。
echo.
echo   如果浏览器没有自动打开，请手动复制这个链接到浏览器地址栏后按回车：
echo   http://127.0.0.1:7860
echo.

:: 使用 py -3 代替 "python"，可以更精确地启动Python 3
py -3 app.py

echo.
echo ==================================================
echo   程序已结束运行。您可以关闭此窗口了。
echo.

:: pause 命令让窗口在程序结束后不会立即关闭，方便查看最终信息或错误
pause